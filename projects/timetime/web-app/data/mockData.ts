import { ROLE_LABELS } from '../src/app/designTokens';
import {
  Group,
  HistoryEvent,
  MonthlyStat,
  User,
  PunchSettingItem,
  Subgroup,
  WeeklyStat,
} from '../src/app/types';
import { getWeekRange } from '../src/app/dateUtils';

export type MockAuthUser = User & { loginId: string; password: string };

export const MOCK_AUTH_USERS: MockAuthUser[] = [
  {
    id: '1000-0001',
    name: '山本 彩',
    email: 'aya.yamamoto@timetime.co.jp',
    loginId: 'aya.yamamoto@timetime.co.jp',
    password: 'pass-aya',
    role: ROLE_LABELS.superAdmin,
    avatar: null,
    currentGroup: '全社統括',
    currentSubgroup: '監査チーム',
    location: '本社（霞ヶ関）',
    dailyTime: '08:45',
    weeklyHours: '41.5h',
    weeklyDays: '5日出勤',
    monthlyHours: '168h',
    monthlyDays: '21日出勤',
  },
  {
    id: '1000-0002',
    name: '田中 太郎',
    email: 'taro.tanaka@timetime.co.jp',
    loginId: 'taro.tanaka@timetime.co.jp',
    password: 'pass-taro',
    role: ROLE_LABELS.orgAdmin,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '新宿駅前現場',
    location: '新宿駅前現場',
    dailyTime: '08:52',
    weeklyHours: '41.0h',
    weeklyDays: '5日出勤',
    monthlyHours: '168h',
    monthlyDays: '21日出勤',
  },
  {
    id: '1000-0003',
    name: '佐藤 健',
    email: 'ken.sato@timetime.co.jp',
    loginId: 'ken.sato@timetime.co.jp',
    password: 'pass-ken',
    role: ROLE_LABELS.groupAdmin,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '渋谷開発PJ',
    location: '渋谷開発PJ',
    dailyTime: '08:57',
    weeklyHours: '44.0h',
    weeklyDays: '6日出勤',
    monthlyHours: '172h',
    monthlyDays: '23日出勤',
  },
  {
    id: '1000-0004',
    name: '鈴木 花',
    email: 'hana.suzuki@timetime.co.jp',
    loginId: 'hana.suzuki@timetime.co.jp',
    password: 'pass-hana',
    role: ROLE_LABELS.subAdmin,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '新宿駅前現場',
    location: '新宿駅前現場',
    dailyTime: '08:56',
    weeklyHours: '38.0h',
    weeklyDays: '5日出勤',
    monthlyHours: '160h',
    monthlyDays: '19日出勤',
  },
  {
    id: '1000-0005',
    name: '高橋 蓮',
    email: 'ren.takahashi@timetime.co.jp',
    loginId: 'ren.takahashi@timetime.co.jp',
    password: 'pass-ren',
    role: ROLE_LABELS.user,
    avatar: null,
    currentGroup: '関西エリア',
    currentSubgroup: '梅田タワー',
    location: '梅田タワー',
    dailyTime: '09:00',
    weeklyHours: '40.2h',
    weeklyDays: '5日出勤',
    monthlyHours: '166h',
    monthlyDays: '20日出勤',
  },
  {
    id: '1000-0006',
    name: '佐々木 亮',
    email: 'ryo.sasaki@timetime.co.jp',
    loginId: 'ryo.sasaki@timetime.co.jp',
    password: 'pass-ryo',
    role: ROLE_LABELS.orgAdmin,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '渋谷開発PJ',
    location: '渋谷開発PJ',
    dailyTime: '08:40',
    weeklyHours: '42.0h',
    weeklyDays: '5日出勤',
    monthlyHours: '170h',
    monthlyDays: '22日出勤',
  },
  {
    id: '1000-0007',
    name: '中村 愛',
    email: 'ai.nakamura@timetime.co.jp',
    loginId: 'ai.nakamura@timetime.co.jp',
    password: 'pass-ai',
    role: ROLE_LABELS.groupAdmin,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '新宿駅前現場',
    location: '新宿駅前現場',
    dailyTime: '09:05',
    weeklyHours: '39.5h',
    weeklyDays: '5日出勤',
    monthlyHours: '162h',
    monthlyDays: '20日出勤',
  },
  {
    id: '1000-0008',
    name: '小林 悠斗',
    email: 'yuto.kobayashi@timetime.co.jp',
    loginId: 'yuto.kobayashi@timetime.co.jp',
    password: 'pass-yuto',
    role: ROLE_LABELS.user,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '渋谷開発PJ',
    location: '渋谷開発PJ',
    dailyTime: '08:58',
    weeklyHours: '40.0h',
    weeklyDays: '5日出勤',
    monthlyHours: '168h',
    monthlyDays: '21日出勤',
  },
  {
    id: '1000-0009',
    name: '渡辺 舞',
    email: 'mai.watanabe@timetime.co.jp',
    loginId: 'mai.watanabe@timetime.co.jp',
    password: 'pass-mai',
    role: ROLE_LABELS.orgAdmin,
    avatar: null,
    currentGroup: '関西エリア',
    currentSubgroup: '梅田タワー',
    location: '梅田タワー',
    dailyTime: '08:50',
    weeklyHours: '41.2h',
    weeklyDays: '5日出勤',
    monthlyHours: '169h',
    monthlyDays: '21日出勤',
  },
  {
    id: '1000-0010',
    name: '松本 大地',
    email: 'daichi.matsumoto@timetime.co.jp',
    loginId: 'daichi.matsumoto@timetime.co.jp',
    password: 'pass-daichi',
    role: ROLE_LABELS.user,
    avatar: null,
    currentGroup: '関西エリア',
    currentSubgroup: '梅田タワー',
    location: '梅田タワー',
    dailyTime: '09:10',
    weeklyHours: '37.8h',
    weeklyDays: '5日出勤',
    monthlyHours: '158h',
    monthlyDays: '19日出勤',
  },
  {
    id: '1000-0011',
    name: '木村 さくら',
    email: 'sakura.kimura@timetime.co.jp',
    loginId: 'sakura.kimura@timetime.co.jp',
    password: 'pass-sakura',
    role: ROLE_LABELS.subAdmin,
    avatar: null,
    currentGroup: '九州エリア',
    currentSubgroup: '博多駅前',
    location: '博多駅前',
    dailyTime: '08:42',
    weeklyHours: '40.5h',
    weeklyDays: '5日出勤',
    monthlyHours: '167h',
    monthlyDays: '21日出勤',
  },
  {
    id: '1000-0012',
    name: '石井 勇',
    email: 'isamu.ishii@timetime.co.jp',
    loginId: 'isamu.ishii@timetime.co.jp',
    password: 'pass-isamu',
    role: ROLE_LABELS.user,
    avatar: null,
    currentGroup: '九州エリア',
    currentSubgroup: '博多駅前',
    location: '博多駅前',
    dailyTime: '09:12',
    weeklyHours: '39.0h',
    weeklyDays: '5日出勤',
    monthlyHours: '160h',
    monthlyDays: '20日出勤',
  },
  {
    id: '1000-0013',
    name: '伊藤 綾',
    email: 'aya.ito@timetime.co.jp',
    loginId: 'aya.ito@timetime.co.jp',
    password: 'pass-ito',
    role: ROLE_LABELS.groupAdmin,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '新宿駅前現場',
    location: '新宿駅前現場',
    dailyTime: '08:37',
    weeklyHours: '42.5h',
    weeklyDays: '6日出勤',
    monthlyHours: '175h',
    monthlyDays: '23日出勤',
  },
  {
    id: '1000-0014',
    name: '加藤 智也',
    email: 'tomoya.kato@timetime.co.jp',
    loginId: 'tomoya.kato@timetime.co.jp',
    password: 'pass-tomoya',
    role: ROLE_LABELS.orgAdmin,
    avatar: null,
    currentGroup: '関西エリア',
    currentSubgroup: '梅田タワー',
    location: '梅田タワー',
    dailyTime: '08:48',
    weeklyHours: '41.8h',
    weeklyDays: '5日出勤',
    monthlyHours: '170h',
    monthlyDays: '21日出勤',
  },
  {
    id: '1000-0015',
    name: '山口 真央',
    email: 'mao.yamaguchi@timetime.co.jp',
    loginId: 'mao.yamaguchi@timetime.co.jp',
    password: 'pass-mao',
    role: ROLE_LABELS.user,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '渋谷開発PJ',
    location: '渋谷開発PJ',
    dailyTime: '09:07',
    weeklyHours: '38.2h',
    weeklyDays: '5日出勤',
    monthlyHours: '159h',
    monthlyDays: '19日出勤',
  },
  {
    id: '1000-0016',
    name: '岡田 陽向',
    email: 'hinata.okada@timetime.co.jp',
    loginId: 'hinata.okada@timetime.co.jp',
    password: 'pass-hinata',
    role: ROLE_LABELS.groupAdmin,
    avatar: null,
    currentGroup: '九州エリア',
    currentSubgroup: '博多駅前',
    location: '博多駅前',
    dailyTime: '08:55',
    weeklyHours: '40.8h',
    weeklyDays: '5日出勤',
    monthlyHours: '168h',
    monthlyDays: '21日出勤',
  },
  {
    id: '1000-0017',
    name: '斎藤 美優',
    email: 'miyu.saito@timetime.co.jp',
    loginId: 'miyu.saito@timetime.co.jp',
    password: 'pass-miyu',
    role: ROLE_LABELS.subAdmin,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '渋谷開発PJ',
    location: '渋谷開発PJ',
    dailyTime: '08:46',
    weeklyHours: '40.3h',
    weeklyDays: '5日出勤',
    monthlyHours: '166h',
    monthlyDays: '20日出勤',
  },
  {
    id: '1000-0018',
    name: '平野 拓海',
    email: 'takumi.hirano@timetime.co.jp',
    loginId: 'takumi.hirano@timetime.co.jp',
    password: 'pass-takumi',
    role: ROLE_LABELS.user,
    avatar: null,
    currentGroup: '関西エリア',
    currentSubgroup: '梅田タワー',
    location: '梅田タワー',
    dailyTime: '09:15',
    weeklyHours: '37.5h',
    weeklyDays: '5日出勤',
    monthlyHours: '157h',
    monthlyDays: '19日出勤',
  },
  {
    id: '1000-0019',
    name: '森田 菜々',
    email: 'nana.morita@timetime.co.jp',
    loginId: 'nana.morita@timetime.co.jp',
    password: 'pass-nana',
    role: ROLE_LABELS.superAdmin,
    avatar: null,
    currentGroup: '関東エリア',
    currentSubgroup: '監査チーム',
    location: '本社（霞ヶ関）',
    dailyTime: '08:35',
    weeklyHours: '43.0h',
    weeklyDays: '6日出勤',
    monthlyHours: '176h',
    monthlyDays: '23日出勤',
  },
  {
    id: '1000-0020',
    name: '秋山 蒼',
    email: 'ao.akiyama@timetime.co.jp',
    loginId: 'ao.akiyama@timetime.co.jp',
    password: 'pass-ao',
    role: ROLE_LABELS.user,
    avatar: null,
    currentGroup: '九州エリア',
    currentSubgroup: '博多駅前',
    location: '博多駅前',
    dailyTime: '09:05',
    weeklyHours: '38.7h',
    weeklyDays: '5日出勤',
    monthlyHours: '161h',
    monthlyDays: '20日出勤',
  },
];

export const MOCK_USERS: User[] = MOCK_AUTH_USERS.map(({ password, loginId, ...user }) => user);

export const MOCK_USER_DATA: User = MOCK_USERS[1];

export const MOCK_GROUPS: Group[] = [
  { id: 1, name: '関東エリア', code: 'GRP-101' },
  { id: 2, name: '関西エリア', code: 'GRP-102' },
  { id: 3, name: '九州エリア', code: 'GRP-103' },
];

export const MOCK_SUBGROUPS: Record<string, Subgroup[]> = {
  関東エリア: [
    { id: 101, name: '新宿駅前現場', radius: 150 },
    { id: 102, name: '渋谷開発PJ', radius: 200 },
  ],
  関西エリア: [{ id: 201, name: '梅田タワー', radius: 100 }],
  九州エリア: [{ id: 301, name: '博多駅前', radius: 120 }],
};

export const INITIAL_PUNCH_ITEMS: PunchSettingItem[] = [
  {
    id: 1,
    title: '出勤・退勤',
    type: 'system',
    required: true,
    enabled: true,
    labelIn: '出勤',
    labelOut: '退勤',
  },
  {
    id: 2,
    title: '休憩',
    type: 'break',
    required: false,
    enabled: true,
    labelIn: '休憩',
    labelOut: '再開',
  },
];

export const getHistoryEvents = (baseDate: Date): HistoryEvent[] => {
  const seed = baseDate.getDate() + baseDate.getMonth();
  return [
    { id: 1, type: '出勤', punchType: 'in', time: `08:${30 + (seed % 30)}`, valid: true },
    { id: 2, type: '休憩開始', punchType: 'break_start', time: '12:00', valid: true },
    { id: 3, type: '休憩終了', punchType: 'break_end', time: '13:00', valid: true },
    { id: 4, type: '退勤', punchType: 'out', time: `18:${10 + (seed % 40)}`, valid: true },
  ];
};

export const getWeeklyStats = (baseDate: Date): WeeklyStat[] => {
  const { monday } = getWeekRange(baseDate);
  return Array.from({ length: 7 }, (_, i) => {
    const d = new Date(monday);
    d.setDate(monday.getDate() + i);
    return {
      day: ['月', '火', '水', '木', '金', '土', '日'][i],
      hours: i < 5 ? 8 + ((d.getDate() % 5) / 10) : 0,
      date: `${d.getMonth() + 1}/${d.getDate()}`,
    };
  });
};

export const getMonthlyStats = (baseDate: Date): MonthlyStat[] => {
  const y = baseDate.getFullYear();
  const m = baseDate.getMonth();
  const daysInMonth = new Date(y, m + 1, 0).getDate();

  return Array.from({ length: daysInMonth }, (_, i) => {
    const d = new Date(y, m, i + 1);
    const dayOfWeek = d.getDay();
    const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
    return {
      date: `${m + 1}/${i + 1}`,
      day: ['日', '月', '火', '水', '木', '金', '土'][dayOfWeek],
      hours: isWeekend ? 0 : 8.0 + ((i % 3) * 0.25),
      status: isWeekend ? '休日' : '出勤',
    };
  });
};

export const getSubgroupsForGroup = (groupName: string): Subgroup[] => {
  return MOCK_SUBGROUPS[groupName] ?? [];
};

export const getDefaultSubgroupName = (groupName: string, fallback: string) => {
  const subgroups = getSubgroupsForGroup(groupName);
  return subgroups[0]?.name ?? fallback;
};
