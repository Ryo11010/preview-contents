# Plan — Edit 20251206_013025__gitignore-cleanup

## 背景 / 目的
- Next.js の `.next` や一時ファイルが Git に検出されており、不要な差分が多く作業効率が落ちている。
- ルート `.gitignore` を整理し、依存物・ビルド成果物・IDE/OS 生成物・一時キャッシュを網羅的に除外してノイズを減らす。

## 参照 (Fail-Avoid / Success-Reuse)
- Failure 事例: /artifacts への登録なし。3+1・file-map 更新漏れに注意し、プラン承認前に実装しない。
- Success 事例:
  - 20251205_192700__postcss-explicit-config: 設定の明示化と最小差分で問題解消 → `.gitignore` も最小かつ明確なルール追加を踏襲。
  - 20251205_190000__postcss-config-fix: 設定形式のみ差し替え、ファイルマップを更新 → 今回も設定ファイルのみ変更し、マップ更新を徹底。
  - 20251205_161200__music-icon-import: 小さな欠落をピンポイント修正 → `.gitignore` もスコープ限定で行う。

## agents.md 重要ポイント（抜粋）
- ハードコード絶対禁止：環境依存の値を直書きしない（今回は新規値なし）。
- No-Plan, No-Code：承認前に実装差分を出さない。各会話＝1修正で 3+1 を整備。
- A/B/C 方式で代替案提示と採用案明示。`file-map.md` を省略なしで更新する。
- 500 行ルール・命名規則遵守。不要変更を避け、最小パッチにする。

## 代替案 (A/B/C)
- (A) ルート `.gitignore` を Next.js/Node/Tailwind/IDE/OS/ツールキャッシュ（`.next`, `.vercel`, `.turbo`, `coverage`, `*.log`, `.DS_Store`, `*.swp` 等）で網羅し、`site/` 配下の生成物もまとめて除外する。
  - Pros: 単一ファイルで管理、チーム全体でノイズ減少。一般的な不要ファイルを包括。
  - Cons: `.gitignore` がやや長くなる。不要な除外が混入しないよう確認が必要。
- (B) `site/.gitignore` を個別に作成し、ルートは最小構成のままにする。
  - Pros: スコープを Next プロジェクト内に限定できる。
  - Cons: ルートで見ると `.next` などが未除外のまま残り、ノイズが継続する。
- (C) グローバル `~/.gitignore_global` で各自対応し、リポジトリは触らない。
  - Pros: リポジトリを汚さない。
  - Cons: チームでノイズが共有され続け、再現性が落ちる。

### 採用案
- **(A) を採用。** ルートで一括管理すれば `.next` などの生成物を確実に除外でき、作業ノイズを即座に減らせるため。

## 影響範囲
- ルート `.gitignore` のみ。`/artifacts` ドキュメント更新を伴う。

## テスト計画
- `git status --short` で不要な生成物が表示されないことを確認（既に追跡済みの `.next` 等は別途 `git rm --cached` が必要な旨を評価に記載）。

## ハードコードに関する計画
- 新規で環境依存値を追加しない。パス/パターンのみ追加し、値はすべて一般的な無害な除外ルールに留める。

## ロールバック方針
- `.gitignore` の追加ルールを削除するだけで元に戻せる。3+1 の before/after で差分を管理。

## 相談・承認
- status: yes
- approver: user
- time: 2025-12-06T01:35:00Z
- memo: 「yes」を受領したため `.gitignore` 整理を実施する。
