{"ts":"2025-12-07T11:14:06.806Z","caseId":"20251205_192700__postcss-explicit-config","ref":{"gid":null,"turn":null},"summary":"# Success Case — Edit 20251205_192700__postcss-explicit-config\n\n## What worked\n- Tailwind が展開されず UI が崩れていた問題に対し、PostCSS 設定を明示化して解消。\n- `postcss.config.js` で `tailwindcss` を `tailwind.config.ts` のパス付きで require し、Next が確実に Tailwind/Autoprefixer を実行するようにした。\n- `.next` を再生成して `npm run dev` 再起動後、画面がデザインどおりに復旧し、ユーザー確認で正常表示を確認。\n\n## Key steps (repro)\n1. PostCSS を CJS で明示設定: `tailwindcss: { config: path.join(__dirname, 'tailwind.config.ts') }`。\n2. `.next` を削除し、`npm run dev` を再起動。\n3. ブラウザをリロードし、UI がモックどおりに戻ることを確認。\n\n## Files\n- site/postcss.config.js — Tailwind/Autoprefixer のプラグイン設定を明示化。\n\n## Notes\n- オフライン環境では `next build` が Google Fonts 取得で失敗するため、必要ならローカルフォントへ切替を検討。\n- favicon 404 は `site/public/favicon.ico` を配置すると解消。\n","reproduce":[],"tags":[]}
{"ts":"2025-12-07T11:14:06.806Z","caseId":"20251207_150500__work-card-overflow","ref":{"gid":null,"turn":null},"summary":"# Success Case — 20251207_150500__work-card-overflow\n\n- What worked: Adjusted folder fan-out to anchor from grid edges (`edgeAnchorOffset`), making edge cards expand inward without clipping.\n- Files: `site/src/components/Folder.tsx` (anchor offset in transform), `site/src/config/tokens.ts` (`edgeAnchorOffset` token).\n- Notes: Hover behavior was reverted due to instability; only the anchor offset change is retained as the successful pattern.\n","reproduce":[],"tags":[]}
{"ts":"2025-12-07T11:14:06.806Z","caseId":"20251207_230500__work-card-scrub","ref":{"gid":null,"turn":null},"summary":"# Success Case — 20251207_230500__work-card-scrub\n\n- 何をしたか: Work フォルダカードにフォーカス概念を導入し、カード/ドットのクリックで任意カードを前面中央にスライド表示。ドット上のスクラブ（マウス移動/ドラッグ/タッチ）でも順送りにフォーカス切替できるようにした。\n- うまくいった理由: z-index をインデックス決定式で固定し、edgeAnchorOffset を維持しているため、ホバー依存の不安定な重なりがなく、端カードのはみ出しも防げた。スクラブはコンテナ位置から index を算出する決定的な方式で実装し、感度はトークンで調整可能。\n- 変更ファイル: `site/src/components/Folder.tsx`、`site/src/config/tokens.ts`\n","reproduce":[],"tags":[]}
{"ts":"2025-12-07T11:14:06.806Z","caseId":"20251207_231800__work-card-two-step","ref":{"gid":null,"turn":null},"summary":"# Success Case — 20251207_231800__work-card-two-step\n\n- 何をしたか: Work フォルダカードのクリック挙動を2段階に分離し、非最前面カードをクリックした際は前面化のみ行い、すでに前面のカードをクリックしたときに初めて `onClick`（詳細遷移）を発火するようにした。\n- うまくいった理由: 前面化と遷移を分離しているため、意図せず詳細へ飛ぶことがなくなり、フォーカス操作と閲覧が直感的に。z-index を決定的に固定し、edgeAnchorOffset も維持しているため、以前の不安定さは再発しなかった。\n- 変更ファイル: `site/src/components/Folder.tsx`\n","reproduce":[],"tags":[]}
{"ts":"2025-12-07T11:48:07Z","caseId":"20251207_114807__dock-navigation-lock","ref":{"gid":"20251205__portfolio-site","turn":"20251207_114807__dock-navigation-lock"},"summary":"# Success Case — Dock navigation lock during scroll\n\n- 何をしたか: Dock のタブクリック時に目標セクションを pending としてロックし、IntersectionObserver が途中のセクションを検出しても無視。目標セクションに交差した時点でのみアクティブ更新し、2.5s のフォールバックタイマーでロック固着も防いだ。\n- うまくいった理由: スクロール途中の一時的交差で state が揺れる経路を遮断し、決定論的に「目標に着いたときだけ」アクティブを更新したため。既存の決定的 state 設計（スクラブ/二段階クリック）との整合も維持。\n- 変更ファイル: `site/app/page.tsx`\n","reproduce":[],"tags":["navigation","observer","ui"]}
{"ts":"2025-12-07T13:37:46Z","caseId":"20251207_150000__profile-photo-avatar","ref":{"gid":"20251205__portfolio-site","turn":"20251207_150000__profile-photo-avatar"},"summary":"About セクションのアバターを実写真対応に変更。Profile.photo 追加で /images/profile/portrait.jpg を参照し、next/image fill+object-cover で非正方形も正方表示に補正。photo 未設定時は従来アイコンをフォールバックし、favicon 404 をプレースホルダで解消。","reproduce":["site/public/images/profile/portrait.jpg に写真を配置","必要なら photo.src/alt/寸法を site/src/data/profile.ts で調整","npm run dev で /about を確認"],"tags":["about","image","asset"]}
{"ts":"2025-12-07T13:50:00Z","caseId":"20251207_135000__project-gallery-dir","ref":{"gid":"20251205__portfolio-site","turn":"20251207_170000__project-gallery-dir"},"summary":"プロジェクト詳細シートのギャラリーをローカルディレクトリ指定で差し替え可能にし、許可拡張子を自動列挙するAPIを追加。`next/image`のfill+object-coverで自動リサイズし、ディレクトリが空でも既存galleryにフォールバックしてチラつきを防いだ。","reproduce":["site/public/images/projects/<projectId>/ に jpg/png/webp/avif/svg を配置（ファイル名昇順で表示）","ブラウザでプロジェクト詳細を開くとAPI経由で即時反映（cache: no-store）","ディレクトリが空の場合は projects.ts の gallery 配列が使われる"],"tags":["gallery","next-image","api"]}
{"ts":"2025-12-08T05:14:34Z","caseId":"20251208_051422__project-app-icon-card","ref":{"gid":"20251205__portfolio-site","turn":"20251208_051422__app-icon-card"},"summary":"製品詳細シートにモバイルアプリアイコンを添付できるようにし、メタ情報カード右上に1:1カードとして条件表示。型にappIconを追加し、appカテゴリのデータへアイコンURLを設定。ラベルをcopyに追加し、未設定のプロジェクトでは非表示で従来UIを維持。","reproduce":["npm run dev で起動し、appカテゴリのプロジェクト詳細を開く","メタ情報カード右上にApp Iconが表示されることを確認（未設定プロジェクトでは表示されない）"],"tags":["ui","project-detail","image"]}
{"ts":"2025-12-08T05:35:47Z","caseId":"20251208_053547__nav-gallery-refactor","ref":{"gid":"20251205__portfolio-site","turn":"20251208_053547__nav-gallery-refactor"},"summary":"Dock ナビゲーションとギャラリー取得の安定化リファクタ。scrollTo+IntersectionObserver を `use-dock-navigation` に集約し、クリック後は目標セクションに交差した時だけ active を更新（2.5s フォールバックで固着防止）。`use-section-observer` は監視対象/threshold 可変と最後の通知IDで冗長通知を抑制。`ProjectDetailSheet` は AbortController 付きフェッチに整理し、失敗時は静的ギャラリーへフォールバックしつつインジケータ更新を差分のみに限定。UI 変更なしで挙動を決定的にした。","reproduce":["npm run lint","ブラウザで Dock タブクリック→スクロール中にインジケータが揺れず目標到達でのみ更新されることを確認","プロジェクト詳細を開き、ギャラリー画像ディレクトリを切り替えて即時反映することを確認（フェイル時は静的 gallery に戻る）"],"tags":["navigation","observer","gallery","stability"]}
{"ts":"2025-12-08T06:11:45Z","caseId":"20251208_061145__gallery-local-only","ref":{"gid":"20251205__portfolio-site","turn":null},"summary":"ギャラリー表示をローカルディレクトリの実ファイルだけに限定し、静的フォールバック画像を全面廃止。各プロジェクトのgalleryを空配列にし、appIconのみ別枠で表示。API側ではICONプレフィックスを除外し、アイコンがギャラリーに混入しないようにした。","reproduce":["/images/projects/<id>/ にスクリーンショットを配置すると、そのファイルのみギャラリーに表示される","ディレクトリが空またはアイコンのみの場合、ギャラリーは空表示のまま（フォールバックなし）","npm run dev で各プロジェクト詳細を開き、ギャラリーに意図したローカル画像のみが出ることを確認"],"tags":["gallery","asset","app-icon"]}
{"ts":"2025-12-08T07:21:12Z","caseId":"20251208_072112__timeline-platform-icons","ref":{"gid":"20251205__portfolio-site","turn":null},"summary":"タイムラインのアイコンをプラットフォーム別に自動切替。TimelineItem に platform を追加し、project.category → platform → フォールバック(Sparkles)の優先順でアイコン決定するヘルパーを TimelineSection に導入。データ上の icon フィールドは不要化して削除。","reproduce":["site/src/data/timeline.ts に各項目の platform を設定する","npm run lint","ブラウザでタイムラインを開き、app/web/client でアイコンが切り替わることを確認"],"tags":["timeline","icon","platform"]}
{"ts":"2025-12-08T12:35:00Z","caseId":"20251208_123000__portfolio-site-official-listing","ref":{"gid":"20251205__portfolio-site","turn":"20251208_123000__portfolio-site-official-listing"},"summary":"ポートフォリオサイトを Official Site カテゴリとタイムラインに追加し、自己サイトも製品リストに含めた。Work でカテゴリ選択→フォルダ展開→詳細シートの導線が既存プロダクトと同じ流れで機能し、タイムラインからも同じシートへ遷移できることを確認。","reproduce":["npm run lint","Work > Official Site フォルダから Portfolio Site を選択し詳細シートが開くことを確認","Journey タイムラインのポートフォリオ項目からも同じシートへ遷移できることを確認"],"tags":["portfolio","timeline","content"]}
{"ts":"2025-12-08T07:52:54Z","caseId":"20251208_075254__hero-descender-leading","ref":{"gid":"20251205__portfolio-site","turn":"20251208_075254__hero-descender-leading"},"summary":"Hero 見出しの行間を 0.9→1.05 に拡げ、ディセンダー（g など）が切れずに収まるよう調整。背景や他コンポーネントへの副作用を出さず、h1 の className だけを変更して解消。","reproduce":["site/src/components/sections/Hero.tsx で h1 の leading を 1.05 に設定","npm run dev で Hero 見出しの下端が欠けないことを目視確認"],"tags":["hero","typography","ui"]}
{"ts":"2025-12-08T07:59:58Z","caseId":"20251208_075958__hero-contact-scroll","ref":{"gid":"20251205__portfolio-site","turn":null},"summary":"Hero の Contact Me ボタンをメール起動から自己紹介セクションへのスクロールに変更し、メール送信導線は About のメールアイコンのみに集約。Hero は Dock と同じ scrollToSection('about') を使用するため、ナビ動作が決定的に揃う。","reproduce":["npm run dev でページを開き、Hero の Contact Me を押すと About セクションへスムーズスクロールすることを確認","About セクションのメールアイコンを押すと既定メールクライアントが開くことを確認"],"tags":["hero","navigation","contact"]}
{"ts":"2025-12-08T08:21:55Z","caseId":"20251208_082155__about-preload-warning","ref":{"gid":"20251205__portfolio-site","turn":null},"summary":"About のプロフィール画像の priority 指定を外して Next.js の preload 未使用警告を解消。表示やレイアウトは変えず、警告のみを除去した。","reproduce":["npm run lint","ブラウザでページを開き、DevTools コンソールに portrait.jpg の preload 未使用警告が出ないことを確認"],"tags":["about","image","preload"]}
{"ts":"2025-12-08T08:54:23Z","caseId":"20251208_084442__timeline-bubble-white","ref":{"gid":"20251205__portfolio-site","turn":"20251208_084442__timeline-bubble-white"},"summary":"Timeline のアイコン気泡を白ベースに戻し、プラットフォーム別リング＋バッジ色のみ残してシンプル化。縦ラインは朝焼け→蒼グラデを維持し、ロジック/挙動は無変更で色味だけを整えた。","reproduce":["npm run dev を起動し、Timeline を開く","各プラットフォーム（app/web/client/other）のアイコン気泡が白背景で表示され、リング/バッジ色がプラットフォームに応じて変わることを確認"],"tags":["timeline","ui","palette"]}
